{"ast":null,"code":"import _slicedToArray from\"/Users/nguyenvancong/Desktop/my-page/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import'./Login.css';import FormInput from'components/common/input/FormInput';import{Card,CardHeader,CardContent,CardActions,Button}from'@material-ui/core';import{useDispatch,useSelector}from'react-redux';import{useHistory,Link}from'react-router-dom';import{loginAction,clearError}from'redux/actions/userAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var dispatch=useDispatch();var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useSelector=useSelector(function(state){return state.userReducers;}),isLogin=_useSelector.isLogin,userInfo=_useSelector.userInfo,error=_useSelector.error;var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];// Handle when click login button\nvar handleLogin=useCallback(function(){dispatch(loginAction.loginRequest({email:email,password:password}));},[email,password,dispatch]);// If login successfully, redirect to home page\nuseEffect(function(){if(Object.keys(error).length){setErrorMessage('email or password is incorrect');}if(isLogin){dispatch(clearError());history.push('/');}},[isLogin,history,userInfo,error,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[errorMessage&&/*#__PURE__*/_jsx(\"span\",{children:errorMessage}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Login\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(\"form\",{noValidate:true,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(FormInput,{label:\"Email\",name:\"email\",setData:setEmail}),/*#__PURE__*/_jsx(FormInput,{label:\"Password\",name:\"password\",setData:setPassword,type:\"password\"})]})}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",size:\"large\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Don't Have an Account?\"})]})]})]});}export default Login;","map":{"version":3,"sources":["/Users/nguyenvancong/Desktop/my-page/clients/src/components/pages/login/Login.jsx"],"names":["React","useState","useEffect","useCallback","FormInput","Card","CardHeader","CardContent","CardActions","Button","useDispatch","useSelector","useHistory","Link","loginAction","clearError","Login","dispatch","history","email","setEmail","password","setPassword","state","userReducers","isLogin","userInfo","error","errorMessage","setErrorMessage","handleLogin","loginRequest","Object","keys","length","push"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,WAArC,KAAwD,OAAxD,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,mCAAtB,CACA,OAASC,IAAT,CAAeC,UAAf,CAA2BC,WAA3B,CAAwCC,WAAxC,CAAqDC,MAArD,KAAmE,mBAAnE,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,0BAAxC,C,wFAEA,QAASC,CAAAA,KAAT,EAAiB,CACf,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CACA,cAA0BX,QAAQ,CAAC,EAAD,CAAlC,wCAAOkB,KAAP,eAAcC,QAAd,eACA,eAAgCnB,QAAQ,CAAC,EAAD,CAAxC,yCAAOoB,QAAP,eAAiBC,WAAjB,eACA,iBAAqCX,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACC,YAAjB,EAAD,CAAhD,CAAQC,OAAR,cAAQA,OAAR,CAAiBC,QAAjB,cAAiBA,QAAjB,CAA2BC,KAA3B,cAA2BA,KAA3B,CACA,eAAwC1B,QAAQ,CAAC,EAAD,CAAhD,yCAAO2B,YAAP,eAAqBC,eAArB,eAEA;AACA,GAAMC,CAAAA,WAAW,CAAG3B,WAAW,CAAC,UAAM,CACpCc,QAAQ,CAACH,WAAW,CAACiB,YAAZ,CAAyB,CAAEZ,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAAzB,CAAD,CAAR,CACD,CAF8B,CAE5B,CAACF,KAAD,CAAQE,QAAR,CAAkBJ,QAAlB,CAF4B,CAA/B,CAIA;AACAf,SAAS,CAAC,UAAM,CACd,GAAI8B,MAAM,CAACC,IAAP,CAAYN,KAAZ,EAAmBO,MAAvB,CAA+B,CAC7BL,eAAe,CAAC,gCAAD,CAAf,CACD,CACD,GAAIJ,OAAJ,CAAa,CACXR,QAAQ,CAACF,UAAU,EAAX,CAAR,CACAG,OAAO,CAACiB,IAAR,CAAa,GAAb,EACD,CACF,CARQ,CAQN,CAACV,OAAD,CAAUP,OAAV,CAAmBQ,QAAnB,CAA6BC,KAA7B,CAAoCV,QAApC,CARM,CAAT,CAUA,mBACE,aAAK,SAAS,CAAC,OAAf,WACGW,YAAY,eAAI,sBAAOA,YAAP,EADnB,cAEE,MAAC,IAAD,yBACE,KAAC,UAAD,EAAY,KAAK,CAAC,OAAlB,EADF,cAEE,KAAC,WAAD,wBACE,cAAM,UAAU,KAAhB,CAAiB,YAAY,CAAC,KAA9B,wBACE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,CAAyB,IAAI,CAAC,OAA9B,CAAsC,OAAO,CAAER,QAA/C,EADF,cAEE,KAAC,SAAD,EAAW,KAAK,CAAC,UAAjB,CAA4B,IAAI,CAAC,UAAjC,CAA4C,OAAO,CAAEE,WAArD,CAAkE,IAAI,CAAC,UAAvE,EAFF,GADF,EAFF,cAQE,MAAC,WAAD,yBACE,KAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,CAAwB,IAAI,CAAC,OAA7B,CAAqC,OAAO,CAAEQ,WAA9C,mBADF,cAIE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,oCAJF,GARF,GAFF,GADF,CAoBD,CAED,cAAed,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport './Login.css'\nimport FormInput from 'components/common/input/FormInput'\nimport { Card, CardHeader, CardContent, CardActions, Button } from '@material-ui/core'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory, Link } from 'react-router-dom'\nimport { loginAction, clearError } from 'redux/actions/userAction'\n\nfunction Login() {\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const { isLogin, userInfo, error } = useSelector((state) => state.userReducers)\n  const [errorMessage, setErrorMessage] = useState('')\n\n  // Handle when click login button\n  const handleLogin = useCallback(() => {\n    dispatch(loginAction.loginRequest({ email, password }))\n  }, [email, password, dispatch])\n\n  // If login successfully, redirect to home page\n  useEffect(() => {\n    if (Object.keys(error).length) {\n      setErrorMessage('email or password is incorrect')\n    }\n    if (isLogin) {\n      dispatch(clearError())\n      history.push('/')\n    }\n  }, [isLogin, history, userInfo, error, dispatch])\n\n  return (\n    <div className=\"login\">\n      {errorMessage && <span>{errorMessage}</span>}\n      <Card>\n        <CardHeader title=\"Login\" />\n        <CardContent>\n          <form noValidate autoComplete=\"off\">\n            <FormInput label=\"Email\" name=\"email\" setData={setEmail} />\n            <FormInput label=\"Password\" name=\"password\" setData={setPassword} type=\"password\" />\n          </form>\n        </CardContent>\n        <CardActions>\n          <Button color=\"primary\" size=\"large\" onClick={handleLogin}>\n            Login\n          </Button>\n          <Link to=\"/register\">Don't Have an Account?</Link>\n        </CardActions>\n      </Card>\n    </div>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}